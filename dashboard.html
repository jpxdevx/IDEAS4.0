<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart Water Monitoring - Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #e6f3ff; color: #333; line-height: 1.6; }
    .nav { background-color: #003366; padding: 15px; text-align: center; position: fixed; top: 0; width: 100%; z-index: 100; }
    .nav a { color: white; margin: 0 15px; text-decoration: none; font-size: 18px; padding: 10px; border-radius: 5px; transition: background 0.3s; }
    .nav a:hover { background-color: #005f99; }
    h1, h2 { color: #003366; text-align: center; }
    h1 { font-size: 28px; margin-bottom: 10px; margin-top: 80px; }
    h2 { font-size: 22px; margin-bottom: 20px; }
    .header { text-align: center; margin-bottom: 30px; padding: 20px; background-color: #cce7ff; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,51,102,0.1); }
    .current-readings { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; margin-bottom: 30px; }
    .reading-card { background-color: white; border-radius: 10px; padding: 20px; width: 250px; text-align: center; box-shadow: 0 2px 5px rgba(0,51,102,0.1); transition: transform 0.2s; cursor: pointer; }
    .reading-card:hover { transform: scale(1.05); background-color: #f0f8ff; }
    .reading-card .icon { font-size: 40px; margin-bottom: 10px; }
    .reading-card h3 { font-size: 20px; margin: 10px 0; color: #003366; }
    .reading-card p { font-size: 18px; font-weight: bold; color: #005f99; }
    .reading-card .description { font-size: 14px; color: #666; margin-top: 10px; }
    .dashboard { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
    .chart-container { background-color: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 5px rgba(0,51,102,0.1); }
    .chart-container h3 { text-align: center; margin-bottom: 15px; font-size: 18px; color: #003366; }
    @media (max-width: 768px) { .current-readings { flex-direction: column; align-items: center; } .reading-card { width: 100%; max-width: 300px; } .dashboard { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <nav class="nav">
    <a href="index.html">üè† Home</a>
    <a href="dashboard.html">üìä Dashboard</a>
    <a href="contact.html">üìû Contact</a>
  </nav>
  <div class="header">
    <h1>Smart Water Monitoring Dashboard</h1>
    <p>Click on any reading below to see full details and stats.</p>
  </div>
  <h2>Latest Water Check</h2>
  <div class="current-readings">
    <div class="reading-card" onclick="window.location.href='ph-details.html'">
      <div class="icon">üß™</div>
      <h3>Water Quality Level (pH)</h3>
      <p id="current-pH">--</p>
      <div class="description">pH shows if water is safe to drink. Good range: 6.5 to 8.5.</div>
    </div>
    <div class="reading-card" onclick="window.location.href='turbidity-details.html'">
      <div class="icon">üåä</div>
      <h3>Cloudiness (Turbidity)</h3>
      <p id="current-turbidity">-- NTU</p>
      <div class="description">Turbidity measures dirt in water. Lower is cleaner.</div>
    </div>
    <div class="reading-card" onclick="window.location.href='water-level-details.html'">
      <div class="icon">üíß</div>
      <h3>Water Amount (Level)</h3>
      <p id="current-waterLevel">--%</p>
      <div class="description">Shows how full the water tank is. 100% means full.</div>
    </div>
  </div>
  <h2>Water Trends Over Time</h2>
  <div class="dashboard">
    <div class="chart-container">
      <h3>Water Quality Level (pH) Trend</h3>
      <canvas id="phChart"></canvas>
    </div>
    <div class="chart-container">
      <h3>Cloudiness (Turbidity) Trend</h3>
      <canvas id="turbidityChart"></canvas>
    </div>
    <div class="chart-container">
      <h3>Water Amount (Level) Trend</h3>
      <canvas id="waterLevelChart"></canvas>
    </div>
    <div class="chart-container">
      <h3>Current Readings Summary</h3>
      <canvas id="pieChart"></canvas>
    </div>
  </div>
  <script>
    const sampleData = [
      { pH: 7.2, turbidity: 5.1, waterLevel: 85.0, timestamp: new Date(Date.now() - 90000) },
      { pH: 7.1, turbidity: 4.8, waterLevel: 82.5, timestamp: new Date(Date.now() - 80000) },
      { pH: 7.3, turbidity: 5.5, waterLevel: 88.0, timestamp: new Date(Date.now() - 70000) },
      { pH: 7.0, turbidity: 4.2, waterLevel: 80.0, timestamp: new Date(Date.now() - 60000) },
      { pH: 7.4, turbidity: 6.0, waterLevel: 90.5, timestamp: new Date(Date.now() - 50000) },
      { pH: 6.9, turbidity: 3.9, waterLevel: 78.0, timestamp: new Date(Date.now() - 40000) },
      { pH: 7.5, turbidity: 5.8, waterLevel: 92.0, timestamp: new Date(Date.now() - 30000) },
      { pH: 7.2, turbidity: 4.5, waterLevel: 86.5, timestamp: new Date(Date.now() - 20000) },
      { pH: 7.1, turbidity: 5.2, waterLevel: 84.0, timestamp: new Date(Date.now() - 10000) },
      { pH: 7.3, turbidity: 4.9, waterLevel: 87.5, timestamp: new Date() }
    ];
    let phChart, turbidityChart, waterLevelChart, pieChart;
    function initCharts() {
      const ctxPh = document.getElementById('phChart').getContext('2d');
      phChart = new Chart(ctxPh, {
        type: 'line',
        data: { labels: [], datasets: [{ label: 'pH Level', data: [], borderColor: '#005f99', backgroundColor: 'rgba(0,95,153,0.1)', fill: true }] },
        options: { responsive: true, plugins: { tooltip: { callbacks: { label: (ctx) => `pH: ${ctx.parsed.y.toFixed(2)} (Safe: 6.5-8.5)` } } }, scales: { y: { beginAtZero: false, title: { display: true, text: 'pH Value' } } } }
      });
      const ctxTurbidity = document.getElementById('turbidityChart').getContext('2d');
      turbidityChart = new Chart(ctxTurbidity, {
        type: 'bar',
        data: { labels: [], datasets: [{ label: 'Turbidity (NTU)', data: [], backgroundColor: '#4caf50' }] },
        options: { responsive: true, plugins: { tooltip: { callbacks: { label: (ctx) => `Cloudiness: ${ctx.parsed.y.toFixed(2)} NTU (Lower is better)` } } }, scales: { y: { beginAtZero: true, title: { display: true, text: 'NTU' } } } }
      });
      const ctxWaterLevel = document.getElementById('waterLevelChart').getContext('2d');
      waterLevelChart = new Chart(ctxWaterLevel, {
        type: 'line',
        data: { labels: [], datasets: [{ label: 'Water Level (%)', data: [], borderColor: '#2196f3', backgroundColor: 'rgba(33,150,243,0.1)', fill: true }] },
        options: { responsive: true, plugins: { tooltip: { callbacks: { label: (ctx) => `Level: ${ctx.parsed.y.toFixed(2)}%` } } }, scales: { y: { beginAtZero: true, max: 100, title: { display: true, text: 'Percentage (%)' } } } }
      });
      const ctxPie = document.getElementById('pieChart').getContext('2d');
      pieChart = new Chart(ctxPie, {
        type: 'pie',
        data: { labels: ['pH Level', 'Cloudiness (NTU)', 'Water Amount (%)'], datasets: [{ data: [], backgroundColor: ['#005f99', '#4caf50', '#2196f3'] }] },
        options: { responsive: true, plugins: { tooltip: { callbacks: { label: (ctx) => `${ctx.label}: ${ctx.parsed.toFixed(2)}` } } } }
      });
    }
    function loadData() {
      if (sampleData.length > 0) {
        const data = sampleData.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
        const latest = data[0];
        document.getElementById('current-pH').textContent = latest.pH.toFixed(2);
        document.getElementById('current-turbidity').textContent = latest.turbidity.toFixed(2);
        document.getElementById('current-waterLevel').textContent = latest.waterLevel.toFixed(2);
        const reversedData = data.slice().reverse();
        const labels = reversedData.map(d => new Date(d.timestamp).toLocaleTimeString());
        const phData = reversedData.map(d => d.pH);
        const turbidityData = reversedData.map(d => d.turbidity);
        const waterLevelData = reversedData.map(d => d.waterLevel);
        phChart.data.labels = labels; phChart.data.datasets[0].data = phData; phChart.update();
        turbidityChart.data.labels = labels; turbidityChart.data.datasets[0].data = turbidityData; turbidityChart.update();
        waterLevelChart.data.labels = labels; waterLevelChart.data.datasets[0].data = waterLevelData; waterLevelChart.update();
        pieChart.data.datasets[0].data = [latest.pH, latest.turbidity, latest.waterLevel]; pieChart.update();
      }
    }
    initCharts(); loadData();
  </script>
</body>
</html>